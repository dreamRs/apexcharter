# Add an event marker to a chart

Add a point with a label based on a datetime.

## Usage

``` r
add_event_marker(
  ax,
  when,
  y,
  size = 5,
  color = "#000",
  fill = "#FFF",
  width = 2,
  shape = "circle",
  radius = 2,
  label = NULL,
  ...
)
```

## Arguments

- ax:

  An
  [`apexchart()`](https://dreamrs.github.io/apexcharter/reference/apexchart.md)
  `htmlwidget` object.

- when:

  Vector of position to place the event.

- y:

  Coordinate(s) on the y-axis.

- size:

  Size of the marker.

- color:

  Stroke Color of the marker point.

- fill:

  Fill Color of the marker point.

- width:

  Stroke Size of the marker point.

- shape:

  Shape of the marker: `"circle"` or `"square"`.

- radius:

  Radius of the marker (applies to square shape).

- label:

  Add a label to the shade, use a `character` or see
  [`label`](https://dreamrs.github.io/apexcharter/reference/label.md)
  for more controls.

- ...:

  Additional arguments, see
  <https://apexcharts.com/docs/options/annotations/> for possible
  options.

## Value

An
[`apexchart()`](https://dreamrs.github.io/apexcharter/reference/apexchart.md)
`htmlwidget` object.

## See also

[`add_event`](https://dreamrs.github.io/apexcharter/reference/add_event.md)
to add a vertical line.

## Examples

``` r
library(apexcharter)
data("consumption")

# add a marker
apex(consumption, aes(date, value, group = type), "spline") %>% 
  add_event_marker(when = "2020-01-22", y = 1805)

{"x":{"ax_opts":{"chart":{"type":"line"},"series":[{"name":"Realised","type":"line","data":[[1577836800000,1445],[1577923200000,1545],[1578009600000,1501],[1578096000000,1444],[1578182400000,1443],[1578268800000,1659],[1578355200000,1631],[1578441600000,1558],[1578528000000,1510],[1578614400000,1545],[1578700800000,1478],[1578787200000,1453],[1578873600000,1614],[1578960000000,1594],[1579046400000,1565],[1579132800000,1543],[1579219200000,1539],[1579305600000,1498],[1579392000000,1520],[1579478400000,1744],[1579564800000,1792],[1579651200000,1805],[1579737600000,1798],[1579824000000,1760],[1579910400000,1593],[1579996800000,1469],[1580083200000,1616],[1580169600000,1637],[1580256000000,1619],[1580342400000,1594],[1580428800000,1462],[1580515200000,1314],[1580601600000,1247],[1580688000000,1385],[1580774400000,1511],[1580860800000,1588],[1580947200000,1636],[1581033600000,1628],[1581120000000,1430],[1581206400000,1352],[1581292800000,1470],[1581379200000,1534],[1581465600000,1572],[1581552000000,1597],[1581638400000,1512],[1581724800000,1361],[1581811200000,1258],[1581897600000,1448],[1581984000000,1523],[1582070400000,1547],[1582156800000,1521],[1582243200000,1535],[1582329600000,1387],[1582416000000,1276],[1582502400000,1403],[1582588800000,1464],[1582675200000,1591],[1582761600000,1631],[1582848000000,1601],[1582934400000,1400]]},{"name":"Forecast D-1","type":"line","data":[[1577836800000,1481],[1577923200000,1577],[1578009600000,1553],[1578096000000,1463],[1578182400000,1459],[1578268800000,1681],[1578355200000,1652],[1578441600000,1569],[1578528000000,1512],[1578614400000,1520],[1578700800000,1467],[1578787200000,1457],[1578873600000,1630],[1578960000000,1603],[1579046400000,1563],[1579132800000,1570],[1579219200000,1545],[1579305600000,1490],[1579392000000,1520],[1579478400000,1754],[1579564800000,1814],[1579651200000,1804],[1579737600000,1786],[1579824000000,1756],[1579910400000,1614],[1579996800000,1516],[1580083200000,1644],[1580169600000,1645],[1580256000000,1629],[1580342400000,1617],[1580428800000,1489],[1580515200000,1305],[1580601600000,1226],[1580688000000,1421],[1580774400000,1501],[1580860800000,1589],[1580947200000,1650],[1581033600000,1648],[1581120000000,1474],[1581206400000,1326],[1581292800000,1477],[1581379200000,1527],[1581465600000,1601],[1581552000000,1576],[1581638400000,1518],[1581724800000,1358],[1581811200000,1235],[1581897600000,1459],[1581984000000,1542],[1582070400000,1568],[1582156800000,1540],[1582243200000,1528],[1582329600000,1391],[1582416000000,1282],[1582502400000,1437],[1582588800000,1487],[1582675200000,1553],[1582761600000,1598],[1582848000000,1611],[1582934400000,1391]]}],"dataLabels":{"enabled":false},"stroke":{"curve":"smooth","width":2},"yaxis":{"decimalsInFloat":2,"labels":{"style":{"colors":"#848484"}}},"xaxis":{"type":"datetime","labels":{"style":{"colors":"#848484"}}},"annotations":{"position":"front","points":[{"x":"new Date('2020-01-22').getTime()","y":1805,"marker":{"size":5,"fillColor":"#FFF","strokeColor":"#000","strokeWidth":2,"shape":"circle","radius":2}}]}},"auto_update":{"series_animate":true,"update_options":false,"options_animate":true,"options_redrawPaths":true,"update_synced_charts":false},"sparkbox":false,"xaxis":{"min":"2020-01-01","max":"2020-02-29"},"type":"spline"},"evals":["ax_opts.annotations.points.0.x"],"jsHooks":[]}
# with a label
apex(consumption, aes(date, value, group = type), "spline") %>% 
  add_event_marker(when = "2020-01-22", y = 1805, label = "Consumption peak")

{"x":{"ax_opts":{"chart":{"type":"line"},"series":[{"name":"Realised","type":"line","data":[[1577836800000,1445],[1577923200000,1545],[1578009600000,1501],[1578096000000,1444],[1578182400000,1443],[1578268800000,1659],[1578355200000,1631],[1578441600000,1558],[1578528000000,1510],[1578614400000,1545],[1578700800000,1478],[1578787200000,1453],[1578873600000,1614],[1578960000000,1594],[1579046400000,1565],[1579132800000,1543],[1579219200000,1539],[1579305600000,1498],[1579392000000,1520],[1579478400000,1744],[1579564800000,1792],[1579651200000,1805],[1579737600000,1798],[1579824000000,1760],[1579910400000,1593],[1579996800000,1469],[1580083200000,1616],[1580169600000,1637],[1580256000000,1619],[1580342400000,1594],[1580428800000,1462],[1580515200000,1314],[1580601600000,1247],[1580688000000,1385],[1580774400000,1511],[1580860800000,1588],[1580947200000,1636],[1581033600000,1628],[1581120000000,1430],[1581206400000,1352],[1581292800000,1470],[1581379200000,1534],[1581465600000,1572],[1581552000000,1597],[1581638400000,1512],[1581724800000,1361],[1581811200000,1258],[1581897600000,1448],[1581984000000,1523],[1582070400000,1547],[1582156800000,1521],[1582243200000,1535],[1582329600000,1387],[1582416000000,1276],[1582502400000,1403],[1582588800000,1464],[1582675200000,1591],[1582761600000,1631],[1582848000000,1601],[1582934400000,1400]]},{"name":"Forecast D-1","type":"line","data":[[1577836800000,1481],[1577923200000,1577],[1578009600000,1553],[1578096000000,1463],[1578182400000,1459],[1578268800000,1681],[1578355200000,1652],[1578441600000,1569],[1578528000000,1512],[1578614400000,1520],[1578700800000,1467],[1578787200000,1457],[1578873600000,1630],[1578960000000,1603],[1579046400000,1563],[1579132800000,1570],[1579219200000,1545],[1579305600000,1490],[1579392000000,1520],[1579478400000,1754],[1579564800000,1814],[1579651200000,1804],[1579737600000,1786],[1579824000000,1756],[1579910400000,1614],[1579996800000,1516],[1580083200000,1644],[1580169600000,1645],[1580256000000,1629],[1580342400000,1617],[1580428800000,1489],[1580515200000,1305],[1580601600000,1226],[1580688000000,1421],[1580774400000,1501],[1580860800000,1589],[1580947200000,1650],[1581033600000,1648],[1581120000000,1474],[1581206400000,1326],[1581292800000,1477],[1581379200000,1527],[1581465600000,1601],[1581552000000,1576],[1581638400000,1518],[1581724800000,1358],[1581811200000,1235],[1581897600000,1459],[1581984000000,1542],[1582070400000,1568],[1582156800000,1540],[1582243200000,1528],[1582329600000,1391],[1582416000000,1282],[1582502400000,1437],[1582588800000,1487],[1582675200000,1553],[1582761600000,1598],[1582848000000,1611],[1582934400000,1391]]}],"dataLabels":{"enabled":false},"stroke":{"curve":"smooth","width":2},"yaxis":{"decimalsInFloat":2,"labels":{"style":{"colors":"#848484"}}},"xaxis":{"type":"datetime","labels":{"style":{"colors":"#848484"}}},"annotations":{"position":"front","points":[{"x":"new Date('2020-01-22').getTime()","y":1805,"marker":{"size":5,"fillColor":"#FFF","strokeColor":"#000","strokeWidth":2,"shape":"circle","radius":2},"label":{"text":"Consumption peak"}}]}},"auto_update":{"series_animate":true,"update_options":false,"options_animate":true,"options_redrawPaths":true,"update_synced_charts":false},"sparkbox":false,"xaxis":{"min":"2020-01-01","max":"2020-02-29"},"type":"spline"},"evals":["ax_opts.annotations.points.0.x"],"jsHooks":[]}
# add several markers
apex(consumption, aes(date, value, group = type), "spline") %>% 
  add_event_marker(
    when = c("2020-01-02", "2020-01-06", "2020-01-13", 
             "2020-01-22", "2020-01-28", "2020-02-06",
             "2020-02-13", "2020-02-19", "2020-02-27"),
    y = c(1545, 1659, 1614,
          1805, 1637, 1636, 
          1597, 1547, 1631),
    size = 10,
    color = "firebrick"
  )

{"x":{"ax_opts":{"chart":{"type":"line"},"series":[{"name":"Realised","type":"line","data":[[1577836800000,1445],[1577923200000,1545],[1578009600000,1501],[1578096000000,1444],[1578182400000,1443],[1578268800000,1659],[1578355200000,1631],[1578441600000,1558],[1578528000000,1510],[1578614400000,1545],[1578700800000,1478],[1578787200000,1453],[1578873600000,1614],[1578960000000,1594],[1579046400000,1565],[1579132800000,1543],[1579219200000,1539],[1579305600000,1498],[1579392000000,1520],[1579478400000,1744],[1579564800000,1792],[1579651200000,1805],[1579737600000,1798],[1579824000000,1760],[1579910400000,1593],[1579996800000,1469],[1580083200000,1616],[1580169600000,1637],[1580256000000,1619],[1580342400000,1594],[1580428800000,1462],[1580515200000,1314],[1580601600000,1247],[1580688000000,1385],[1580774400000,1511],[1580860800000,1588],[1580947200000,1636],[1581033600000,1628],[1581120000000,1430],[1581206400000,1352],[1581292800000,1470],[1581379200000,1534],[1581465600000,1572],[1581552000000,1597],[1581638400000,1512],[1581724800000,1361],[1581811200000,1258],[1581897600000,1448],[1581984000000,1523],[1582070400000,1547],[1582156800000,1521],[1582243200000,1535],[1582329600000,1387],[1582416000000,1276],[1582502400000,1403],[1582588800000,1464],[1582675200000,1591],[1582761600000,1631],[1582848000000,1601],[1582934400000,1400]]},{"name":"Forecast D-1","type":"line","data":[[1577836800000,1481],[1577923200000,1577],[1578009600000,1553],[1578096000000,1463],[1578182400000,1459],[1578268800000,1681],[1578355200000,1652],[1578441600000,1569],[1578528000000,1512],[1578614400000,1520],[1578700800000,1467],[1578787200000,1457],[1578873600000,1630],[1578960000000,1603],[1579046400000,1563],[1579132800000,1570],[1579219200000,1545],[1579305600000,1490],[1579392000000,1520],[1579478400000,1754],[1579564800000,1814],[1579651200000,1804],[1579737600000,1786],[1579824000000,1756],[1579910400000,1614],[1579996800000,1516],[1580083200000,1644],[1580169600000,1645],[1580256000000,1629],[1580342400000,1617],[1580428800000,1489],[1580515200000,1305],[1580601600000,1226],[1580688000000,1421],[1580774400000,1501],[1580860800000,1589],[1580947200000,1650],[1581033600000,1648],[1581120000000,1474],[1581206400000,1326],[1581292800000,1477],[1581379200000,1527],[1581465600000,1601],[1581552000000,1576],[1581638400000,1518],[1581724800000,1358],[1581811200000,1235],[1581897600000,1459],[1581984000000,1542],[1582070400000,1568],[1582156800000,1540],[1582243200000,1528],[1582329600000,1391],[1582416000000,1282],[1582502400000,1437],[1582588800000,1487],[1582675200000,1553],[1582761600000,1598],[1582848000000,1611],[1582934400000,1391]]}],"dataLabels":{"enabled":false},"stroke":{"curve":"smooth","width":2},"yaxis":{"decimalsInFloat":2,"labels":{"style":{"colors":"#848484"}}},"xaxis":{"type":"datetime","labels":{"style":{"colors":"#848484"}}},"annotations":{"position":"front","points":[{"x":"new Date('2020-01-02').getTime()","y":1545,"marker":{"size":10,"fillColor":"#FFF","strokeColor":"firebrick","strokeWidth":2,"shape":"circle","radius":2}},{"x":"new Date('2020-01-06').getTime()","y":1659,"marker":{"size":10,"fillColor":"#FFF","strokeColor":"firebrick","strokeWidth":2,"shape":"circle","radius":2}},{"x":"new Date('2020-01-13').getTime()","y":1614,"marker":{"size":10,"fillColor":"#FFF","strokeColor":"firebrick","strokeWidth":2,"shape":"circle","radius":2}},{"x":"new Date('2020-01-22').getTime()","y":1805,"marker":{"size":10,"fillColor":"#FFF","strokeColor":"firebrick","strokeWidth":2,"shape":"circle","radius":2}},{"x":"new Date('2020-01-28').getTime()","y":1637,"marker":{"size":10,"fillColor":"#FFF","strokeColor":"firebrick","strokeWidth":2,"shape":"circle","radius":2}},{"x":"new Date('2020-02-06').getTime()","y":1636,"marker":{"size":10,"fillColor":"#FFF","strokeColor":"firebrick","strokeWidth":2,"shape":"circle","radius":2}},{"x":"new Date('2020-02-13').getTime()","y":1597,"marker":{"size":10,"fillColor":"#FFF","strokeColor":"firebrick","strokeWidth":2,"shape":"circle","radius":2}},{"x":"new Date('2020-02-19').getTime()","y":1547,"marker":{"size":10,"fillColor":"#FFF","strokeColor":"firebrick","strokeWidth":2,"shape":"circle","radius":2}},{"x":"new Date('2020-02-27').getTime()","y":1631,"marker":{"size":10,"fillColor":"#FFF","strokeColor":"firebrick","strokeWidth":2,"shape":"circle","radius":2}}]}},"auto_update":{"series_animate":true,"update_options":false,"options_animate":true,"options_redrawPaths":true,"update_synced_charts":false},"sparkbox":false,"xaxis":{"min":"2020-01-01","max":"2020-02-29"},"type":"spline"},"evals":["ax_opts.annotations.points.0.x","ax_opts.annotations.points.1.x","ax_opts.annotations.points.2.x","ax_opts.annotations.points.3.x","ax_opts.annotations.points.4.x","ax_opts.annotations.points.5.x","ax_opts.annotations.points.6.x","ax_opts.annotations.points.7.x","ax_opts.annotations.points.8.x"],"jsHooks":[]}
```
